---
name: create_domain

check:
  - pipe: verify_info
    conditions:
      - [info.itx.data !== nil, :insufficient_data]

verify:
  - pipe: :custom
    name: extract_domain_address
    to: [:priv, :domain_address]
  - pipe: extract_state
    from: [:priv, :domain_address]
    to: [:priv, :domain]
    status: :ok
  # if the domain exists, that means user is trying to create a duplicate domain. Do not allow this.
  - pipe: verify_info
    conditions:
      - [info.priv.domain === nil, :invalid_asset]

update:
  - pipe: :custom
    name: update_tx
    address: [:priv, :domain_address]
